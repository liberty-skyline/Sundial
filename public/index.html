<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sundial</title>
    <!-- index stylesheet -->
    <link rel="stylesheet" type="text/css" href="./css/index.css" />
    <!-- scripts -->
    <script src="scripts/task.js" ></script>
    <script src="scripts/taskmanager.js" ></script>
    <script src="scripts/timer.js" ></script>

  </head>
  <body>
    <main>
      <div class="sunset">

        <div class="timer-text">25:00</div>

        <div class="card">

          <div>

            <div class="header-subheader-1">
              <h1 class="header-subheader-2">
                Pre-Calculus
              </h1>
              <h2 class="header-subheader-3">
                25 Minute Sprint
              </h2>
            </div>

            <div class="upcoming-tasks-1">
              <span class="upcoming-tasks-2">
                Your Upcoming Tasks
              </span>
              <div class="upcoming-tasks-3">
                <div class="upcoming-tasks-4">
                  <span class="upcoming-tasks-5">
                    Time To Complete
                  </span>
                </div>
                <div class="upcoming-tasks-6">
                  <span class="upcoming-tasks-7">
                    Task Title
                  </span>
                </div>
              </div>
              <span class="upcoming-tasks-8">
                That's it for today!
              </span>
            </div>

          </div>

          <div class="progress-bar-1">
            <p class="progress-bar-2">
              You're <span id="progress-total">50%</span> finished with your itinerary.
            </p>
            <div class="progress-bar-3">
              <div class="progress-bar-4"></div>
            </div>
          </div>

        </div>

      </div>
    </main>
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        task1 = new Task("math", 80);
        TaskManager.addTask(task1);
        Timer.startTimer();
        const progressTotal = document.getElementById("progress-total");
        const appLoop = () => {
          if(Timer.getTotalProgress() == undefined) {
            progressTotal.innerHTML = "null"; // change this
            clearInterval(intervalID);
          } else {
            progressTotal.innerHTML = Timer.getTotalProgress().toString() + "%";
            console.log("hi");
          }
        }
        let intervalID = setInterval(appLoop, 100);
      });
    </script>
  </body>
</html>
